{"version":3,"file":"bundle.esm.js","sources":["../src/index.js"],"sourcesContent":["import http from 'http';\n\nfunction lift() {\n  let { port, host } = this.config;\n  port = port || 1337;\n  // eslint-disable-next-line no-multi-assign\n  const server = (this.server = http.createServer(this.app.callback()));\n\n  server.listen(port, host);\n  server.on('error', onError);\n  server.on('listening', () => {\n    onListening();\n    this.emit('listening');\n  });\n\n  function onError(error) {\n    if (error.syscall !== 'listen') {\n      throw error;\n    }\n\n    let bind = typeof port === 'string' ? `Pipe ${port}` : `Port ${port}`;\n\n    switch (error.code) {\n      case 'EACCES':\n        bind += ' requires elevated privileges';\n        logger.error(bind);\n        process.exit(1);\n        break;\n      case 'EADDRINUSE':\n        bind += ' is already in use';\n        logger.error(bind);\n        process.exit(1);\n        break;\n      default:\n        throw error;\n    }\n  }\n\n  function onListening() {\n    const addr = server.address();\n    let bind = '';\n    if (typeof addr === 'string') {\n      bind = `'pipe ${addr}`;\n    }\n    else {\n      if (addr.address === '::') {\n        bind += `${addr.family} `;\n        addr.address = '127.0.0.1';\n      }\n\n      bind += `http://${addr.address}:${addr.port}`;\n    }\n\n    logger.debug(`Listening on: ${bind}`);\n  }\n}\n\nexport default lift;\n"],"names":["lift","config","port","server","http","createServer","app","callback","listen","host","on","onError","emit","error","syscall","bind","code","exit","onListening","addr","address","family","debug"],"mappings":";;AAEA,SAASA,IAAT,GAAgB;MACV;QAAA;;MAAiB,KAAKC,MAA1B;SACOC,QAAQ,IAAf,CAFc;;QAIRC,SAAU,KAAKA,MAAL,GAAcC,KAAKC,YAAL,CAAkB,KAAKC,GAAL,CAASC,QAAT,EAAlB,CAA9B;SAEOC,MAAP,CAAcN,IAAd,EAAoBO,IAApB;SACOC,EAAP,CAAU,OAAV,EAAmBC,OAAnB;SACOD,EAAP,CAAU,WAAV,EAAuB,MAAM;;SAEtBE,IAAL,CAAU,WAAV;GAFF;;WAKSD,OAAT,CAAiBE,KAAjB,EAAwB;QAClBA,MAAMC,OAAN,KAAkB,QAAtB,EAAgC;YACxBD,KAAN;;;QAGEE,OAAO,OAAOb,IAAP,KAAgB,QAAhB,GAA4B,QAAOA,IAAK,EAAxC,GAA6C,QAAOA,IAAK,EAApE;;YAEQW,MAAMG,IAAd;WACO,QAAL;gBACU,+BAAR;eACOH,KAAP,CAAaE,IAAb;gBACQE,IAAR,CAAa,CAAb;;;WAEG,YAAL;gBACU,oBAAR;eACOJ,KAAP,CAAaE,IAAb;gBACQE,IAAR,CAAa,CAAb;;;;cAGMJ,KAAN;;;;WAIGK,WAAT,GAAuB;UACfC,OAAOhB,OAAOiB,OAAP,EAAb;QACIL,OAAO,EAAX;;QACI,OAAOI,IAAP,KAAgB,QAApB,EAA8B;aACpB,SAAQA,IAAK,EAArB;KADF,MAGK;UACCA,KAAKC,OAAL,KAAiB,IAArB,EAA2B;gBAChB,GAAED,KAAKE,MAAO,GAAvB;aACKD,OAAL,GAAe,WAAf;;;cAGO,UAASD,KAAKC,OAAQ,IAAGD,KAAKjB,IAAK,EAA5C;;;WAGKoB,KAAP,CAAc,iBAAgBP,IAAK,EAAnC;;;;;;"}